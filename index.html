<!doctype html>
<html lang="en"><head>
<title>toyreals0 calculator demo</title>
<script src="toyreals.js"></script>
<script src="parser.js"></script>
<style>
body {
  font-family: sans-serif;
}
.inputline, .outputline {
  display: flex;
}
textarea {
  flex: 100%;
  font-size: 150%;
  line-height: 1;
  margin: 0;
}
button {
  font-size: 100%;
  width: 2em;
}
output {
  flex: 100%;
  word-break: break-all;
  white-space: pre-wrap;
}
input[type="number"] {
  max-width: 100%;
}
</style>
</head>
<body>
<details><summary>supported operations</summary>
<ul>
<li><b>x + y, x - y, x * y, x / y</b>: add, subtract, multiply, divide; must not divide by zero</li>
<li><b>- x</b>: negation</li>
<li><b>/ x</b>: reciprocal; x must not be zero</li>
<li><b>[x, y]</b>: closed interval</li>
<li><b>x.[n]</b>: nth closed interval in the sequence defining x; n starts from zero</li>
<li><b>x => x * x</b>: function definition</li>
<li><b>f x</b>: function application</li>
<li><b>let x := 3 in x * x</b>: local variable</li>
<li><b>min xs</b>: lower bound of interval xs</li>
<li><b>max xs</b>: upper bound of interval xs</li>
<li><b>make f</b>: number contained in the rational intervals f(0), f(1), f(2), ...; intervals must be nested and converge to zero width</li>
<li><b>intersect f</b>: number contained in the real intervals f(0), f(1), f(2), ...; intervals must be nested and converge to zero width</li>
<li><b>repeat f x n</b>: result of applying f to x n times</li>
<li><b>round x</b>: result of either rounding x up to the next integer or rounding x down to the previous integer</li>
<li><b>piecewise a f g x</b>: yields f(x) when x &#8804; a and g(x) when x &#8805; a; if f(x) differs from g(x), x must differ from a</li>
<li><b>abs x</b>: absolute value</li>
</ul>
<p>Ignoring a &quot;must&quot; above results in undefined behavior, which may include the calculator hanging or producing incorrect results.</p>
</details>
<details><summary>source / credits / build instructions</summary>
<p>In addition to <a href="https://github.com/ccd0/toyreals0">the main source code</a>,
the calculator demo uses code from the following projects:</p>
<ul>
<li><a href="https://coq.inria.fr/">Coq</a>
[<a href="https://github.com/coq/coq">source</a>]
[<a href="https://github.com/coq/coq/blob/master/LICENSE">license</a>]</li>
<li><a href="https://ocsigen.org/js_of_ocaml/latest/manual/overview">js_of_ocaml</a>
[<a href="https://github.com/ocsigen/js_of_ocaml">source</a>]
[<a href="https://github.com/ocsigen/js_of_ocaml/blob/master/LICENSE">license</a>]</li>
<li><a href="https://github.com/ocaml/Zarith">Zarith</a>
[<a href="https://github.com/ocaml/Zarith">source</a>]
[<a href="https://github.com/ocaml/Zarith/blob/master/LICENSE">license</a>]</li>
<li><a href="https://github.com/janestreet/zarith_stubs_js">Zarith Stubs JS</a>
[<a href="https://github.com/janestreet/zarith_stubs_js">source</a>]
[<a href="https://github.com/janestreet/zarith_stubs_js/blob/master/LICENSE.md">license</a>]</li>
<li><a href="https://github.com/peterolson/BigInteger.js">BigInteger.js</a>
(included in Zarith Stubs JS)</li>
</ul>
<p>The easiest way to fetch all required dependencies is to install <a href="https://opam.ocaml.org/">opam</a> and run:</p>
<pre>opam install ocaml ocamlfind coq=8.16.0 js_of_ocaml js_of_ocaml-ppx zarith zarith_stubs_js</pre>
<p>Then in the directory where you have downloaded the main source code, run:</p>
<pre>./extract.sh</pre>
</details>
<p>Enter an expression below. Results are either rounded up or down to the given number of digits after the decimal place.</p>
<div class="inputline"><textarea>make (repeat (xs => let avg := (min xs + max xs) / 2 in [2 / avg, avg]) [1, 2])</textarea><button>=</button></div>
<div class="outputline"><output></output><label><span>Digits:</span><br /><input type="number" value="10" min="0"></label></div>
<script src="ui.js"></script>
</body></html>
